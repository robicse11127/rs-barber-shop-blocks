System.register(["react","proxy-compare","use-sync-external-store/shim","valtio/vanilla"],function(a){"use strict";var r,i,o,f,b,p,y,h,x,c;return{setters:[function(e){r=e.useRef,i=e.useCallback,o=e.useEffect,f=e.useMemo,b=e.default},function(e){p=e.isChanged,y=e.createProxy},function(e){h=e.default},function(e){x=e.subscribe,c=e.snapshot,a({getVersion:e.getVersion,proxy:e.proxy,ref:e.ref,snapshot:e.snapshot,subscribe:e.subscribe,unstable_buildProxyFunction:e.unstable_buildProxyFunction})}],execute:function(){a("useSnapshot",C);const{use:e}=b,{useSyncExternalStore:v}=h;function C(t,l){const S=l==null?void 0:l.sync,s=r(),u=r();let g=!0;const k=v(i(n=>{const P=x(t,n,S);return n(),P},[t,S]),()=>{const n=c(t,e);try{if(!g&&s.current&&u.current&&!p(s.current,n,u.current,new WeakMap))return s.current}catch{}return n},()=>c(t,e));g=!1;const M=new WeakMap;o(()=>{s.current=k,u.current=M});const E=f(()=>new WeakMap,[]);return y(k,M,E)}}}});
